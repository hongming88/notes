# 动态规划

至于为什么最终的解法看起来如此精妙，是因为动态规划遵循一套固定的流程：**递归的暴力解法 -> 带备忘录的递归解法 -> 非递归的动态规划解法**。这个过程是层层递进的解决问题的过程，你如果没有前面的铺垫，直接看最终的非递归动态规划解法，当然会觉得牛逼而不可及了。

b站：https://www.bilibili.com/video/BV1AB4y1w7eT/?spm_id_from=333.788.recommend_more_video.1



带备忘录的递归解法:DP没有递归,因为用数组存储前置结果,用这些结果可以进行递推。所以不用递归,但是也在递推!



**步骤二、带备忘录的递归解法**



明确了问题，其实就已经把问题解决了一半。即然耗时的原因是重复计算，那么我们可以造一个「备忘录」，每次算出某个子问题的答案后别急着返回，先记到「备忘录」里再返回；每次遇到一个子问题先去「备忘录」里查一查，如果发现之前已经解决过这个问题了，直接把答案拿出来用，不要再耗时去计算了。



「状态转移方程」？为了听起来高端。你把 f(n) 想做一个状态 n，这个状态 n 是由状态 n - 1 和状态 n - 2 相加转移而来，这就叫状态转移，仅此而已。



**要符合「最优子结构」，子问题间必须互相独立。**啥叫相互独立？你肯定不想看数学证明，我用一个直观的例子来讲解。



比如说，你的原问题是考出最高的总成绩，那么你的子问题就是要把语文考到最高，数学考到最高...... 为了每门课考到最高，你要把每门课相应的选择题分数拿到最高，填空题分数拿到最高...... 当然，最终就是你每门课都是满分，这就是最高的总成绩。



得到了正确的结果：最高的总成绩就是总分。因为这个过程符合最优子结构，“每门科目考到最高”这些子问题是互相独立，互不干扰的。



但是，如果加一个条件：你的语文成绩和数学成绩会互相制约，此消彼长。这样的话，显然你能考到的最高总成绩就达不到总分了，按刚才那个思路就会得到错误的结果。因为子问题并不独立，语文数学成绩无法同时最优，所以最优子结构被破坏。



# 解题步骤

对于动态规划问题，我将拆解为如下五步曲，这五步都搞清楚了，才能说把动态规划真的掌握了！

1. 确定dp数组（dp table）以及下标的含义
2. 确定递推公式
3. dp数组如何初始化
4. 确定遍历顺序
5. 举例推导dp数组(打印出来的数组)



***动态规划杀手锏：\***

***1）建模：\***

***最优子结构\***

***状态转移方程\***

***边界\***

***2）实现：\***

***递归法\***

***备忘录法（从上倒下，非全二叉树，hash保存！）\***

***自底而上（迭代实现）\***



动态规划需要注意的要点：

“问5”法则判断问题是否是动态规划，例如最优解呀，最小或者最大等等；

如果判断属于动态规划的话，接下来我们可以根据“问4”法则求解：

1）状态（小规模问题的数学表示）

2）状态转移方程（大规模问题如何转化为更小的问题）

3）最小状态（最小规模的问题）

4）要求的返回值是什么



***1、动态规划的设计，其实就是利用最优子结构和重叠子问题性质对穷举法进行优化，通过将中间结果保存在数组中，实现用空间来换取时间交换，实现程序的快速运行。（动态规划求解时，一般都会转化为网格进行求解，而且因为是空间换时间（避免了子问题的重复计算），因此一般迭代求解）。\***

 ***2、一般对所要求解的问题的时间复杂度要求比较高的，可以优先考虑如下几种算法。\***

***①分治法\***

***②递归法\***

***③贪心算法\***

***④动态规划算法\***





# 贪心算法和动态规划的区别与联系

## 联系

1.都是一种推导算法

2.都是分解成子问题来求解，都需要具有最优子结构



## 区别

1.贪心：**每一步的最优解**  一定包含上一步的最优解，上一步之前的最优解则不作保留；

动态规划：全局最优解中一定包含某个局部最优解，但不一定包含前一个局部最优解，因此需要记录之前的所有的局部最优解 

2.贪心：如果把所有的子问题看成一棵树的话，贪心从根出发，每次向下遍历最优子树即可（通常这个“最优”都是基于当前情况下显而易见的“最优”）；这样的话，就不需要知道一个节点的所有子树情况，于是构不成一棵完整的树；

动态规划：动态规划则自底向上，从叶子向根，构造子问题的解，对每一个子树的根，求出下面每一个叶子的值，最后得到一棵完整的树，并且最终选择其中的最优值作为自身的值，得到答案

3.根据以上两条可以知道，贪心不能保证求得的最后解是最佳的，一般复杂度低；而动态规划本质是穷举法，可以保证结果是最佳的，复杂度高。

4.针对0-1背包问题：这个问题应**比较**选择该物品和不选择该物品**所导致的最终方案**，然后再作出最好选择，==由此就导出许多互相重叠的子问题==，所以用动态规划。



动态规划的选择策略是试探性的，每一步要试探所有的可行解并将结果保存起来，最后通过回溯的方法确定最优解，其试探策略称为决策过程



## 性质

动态规划具有两个性质：

1）重叠子问题

2）***最优子结构\***

贪心算法：

1）贪心选择性质

2）***最优子结构***

解释一下，最优子结构性质是指问题的最优解包含其子问题的最优解时，就称该问题具有***最优子结构\***性质，重叠子问题指的是子问题可能被多次用到，多次计算，动态规划就是为了消除其重叠子问题而设计的。**其实贪心算法是一种特殊的动态规划，由于其具有贪心选择性质，保证了子问题只会被计算一次，不会被多次计算，因此贪心算法其实是最简单的动态规划。**

## 自己理解

贪心：每一步都是最优，整体也是最优的



DP:空间换时间，带备忘录的递归